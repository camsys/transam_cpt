<script type="text/javascript">

	google.load("visualization", "1", {
		'packages': ['corechart']
	});
	

  // Called when the Visualization API is loaded.
  function draw_allocation_chart() {

    // Create a data table
    var allocation_data = new google.visualization.DataTable();
    allocation_data.addColumn('string', 'Fiscal Year');
    allocation_data.addColumn('number', 'Spent');
    allocation_data.addColumn('number', 'Committed');
    allocation_data.addColumn('number', 'Available');
    allocation_data.addRows([
   	<% @funding_source.funding_line_items.where('organization_id = ?', @organization.id).order('fy_year').each do |a| %>
		<%= raw "['#{a.fiscal_year}',#{a.spent},#{a.committed},#{a.available}]," %>
	<% end %>
    ]);
  
    // specify options
    var allocation_options = {
      title: 'Fund Allocations',
      hAxis: {title: 'Fiscal Year'},
      vAxis: {title: '$'},
      isStacked: true,
      //colors: ['green', 'blue', 'red', 'yellow'],
      //legend: 'none'
    };
  
    // Instantiate our chart object.
    var allocation_chart = new google.visualization.ColumnChart(document.getElementById('allocation_chart_div'));
  
    // Draw our chart with the created data and options
    allocation_chart.draw(allocation_data, allocation_options);
  };
  
  // Set callback to run when API is loaded
  google.setOnLoadCallback(draw_allocation_chart);
  	
</script>



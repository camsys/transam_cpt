<script type="text/javascript">

	google.load('visualization', '1.0', {'packages':['corechart']});
	google.setOnLoadCallback(draw_charts);

	function create_charts() {
		<% @organization.eligible_funding_sources.each do |fund| %>
		transam.load_ajax_panel('<%= "chart_#{fund.object_key}" %>', "<%= load_chart_planning_index_path(:fund => fund.object_key) %>", "get", "<%= raw loader_panel_tag() %>");	
		<% end %>
	};
	
	function draw_charts() {
		<% @organization.eligible_funding_sources.each do |fund| %>
    	<%= "chart_func_#{fund.object_key}" %>();
    	<% end %>  
  	};

  	$(document).ready(function() {
    	create_charts();
  	});

		
	// Handle the resize event and make sure the charts are redrawn for the new size
	window.onresize = function() {
    	draw_charts();
	};
	
</script>



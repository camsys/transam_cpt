.table-responsive
  %table.table.table-condensed#plan-table
    %thead
      %tr
        %th.left Project
        - cost_by_year = @total_projects_cost_by_year || {}
        - @years.each do |year|
          %th.center.nowrap
            = format_as_fiscal_year(year)
            %br
            .well.well-sm.bold= format_as_currency(cost_by_year[year])
    %tbody
      - @projects.find_each do |project|
        %tr{:data => {:project => project.object_key}}
          - project_has_early_replacement_assets = false
          %td.left.nowrap
            = render :partial => 'plan_project_detail', :locals => {:project => project}

          - @years.each do |year|
            %td.striped.drop-target{:data => {:year => year}}
              - alis = project.activity_line_items.where(:fy_year => year).each do |ali|
                - project_has_early_replacement_assets = true if !ali.notional? && ali.sogr? && ali.has_early_replacement_assets?
                = render 'ali_render_adaptor', project: project, ali: ali
          - if project_has_early_replacement_assets
            :javascript
              $('tr[data-project="#{project.object_key}"] .project-early-replacement-warning').html(
              '<a class="transam-tooltip" data-placement="top" data-title="Contains early replacement assets" data-toggle="tooltip" tabindex="0" data-original-title="" title="">' +
              '<i class="fa fa-exclamation-triangle" style="color: red !important;"></i></a>');
:javascript

  var org_filter = #{@org_filter};
  var capital_project_type_filter = #{@capital_project_type_filter};
  var capital_project_flag_filter = #{@capital_project_flag_filter};
  var asset_subtype_filter = #{@asset_subtype_filter};

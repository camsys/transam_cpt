:css
  .panel_asset_table .library-table {
    background:var(--gray-light);
  }

  .phase_info {
    padding: 10px 15px;
  }

  .panel-body {
    padding: 0px 0px 0px 10px;
  }

.panel.panel-default.phase{ ali: "#{phase.draft_project.team_ali_code}", year: "#{phase.fy_year}"}
  .panel-heading
    =link_to draft_project_path(phase.draft_project) do
      =phase.draft_project.try(:title).try(:titleize)
    = ">"
    =link_to draft_project_phase_path(phase) do
      =phase.name
      =" (#{phase.get_fiscal_year})"
  .panel-body 
    .row 
      .col-md-4.phase_info
        .row
          %strong 
            ALI:
          =phase.team_ali_code.try(:code)
        .row
          %strong
            Cost:
          =format_as_currency(phase.cost)
        .row
          %strong
            Allocated:
          =format_as_currency(phase.allocated)
        .row
          %strong
            Remaining:
          =format_as_currency(phase.remaining)
      .col-md-8.panel_asset_table
        .row 
          -assets = phase.transit_assets
          .col-md-3
            ="Asset Count: "
            =assets.count
          .col-md-3 
            .row
              ="Age:"
              -ages = assets.map{ |a| (Date.today.to_time.to_i - a.in_service_date.to_time.to_i)/(60*60*24*365) }
            .row
              ="Min"
              -# =assets.map{ |a| a.history.last.try(:event_date) }.min
              =ages.min
            .row
              ="Max"
              -# =assets.map{ |a| a.life_cycle_action_date }.max
              =ages.max
            .row 
              ="Avg"
              =ages.reduce(:+) / ages.size.to_f
            -# .row 
            -#   ="Life Remaining"
            -#   -ulr = assets.map{ |a| a.useful_life_remaining(Date.new) }
            -#   =ulr.reduce(:+) / ulr.size.to_f
          .col-md-3 
            .row
              ="Condition"
            .row
              -conditions = assets.map{ |a| a.reported_condition_rating_string }
              ="Min"
              =conditions.min
            .row
              ="Max"
              =conditions.max
          .col-md-3 
            -# .row
            -#   ="Milage"
            -#   -milages = assets.map{ |a| a.reported_milage }
            -# .row
            -#   =milages.min
            -# .row
            -#   =milages.max

        -# =render partial: "phase_with_assets_panel_table", locals: {draft_project_phase: phase}
      
  .panel-footer.text-right
    ="Created: #{phase.created_at.strftime('%m/%d/%Y at %I:%M%p')}"